# プロジェクト概要

このプロジェクトでは、 Claude, Codex の2つのAIが共同でブラウザゲームを開発するものです。
各AIへの指示は「README.md を読んで進めてください」だけとします。

# 作るもの

ブラウザ上で動く横スクロールジャンプアクションゲームです。
スーパーマリオブラザーズのようなものを目指します。
アクション性、操作性、ビジュアル、敵キャラクター、ステージなどゲームとしての完成度を上げるように工夫してください。

ブラウザで動くものとして、 HTML, CSS, JavaScript もしくは TypeScript を使って実装してください。
また、WebGLは使わないでください。
index.html をブラウザで開くだけで遊べる状態にしてください。CSSやJavaScriptは外部ファイルを参照してください。

# 開発ルール

Claude → Codex → Claude → ... の順で開発を進めます。指示者（人間）が順番に指示をしていきます。
各AIは自分の番が来たら、README.md とコミットログを読んで、開発を進めてください。
他のAIが編集している可能性があるので、必ず最新のファイルを読み直してください。

開発内容や仕様は都度、 README.md に記載してください。時系列ではなく、現状をまとめ直す形でお願いします。
次につくるものなどはコミットメッセージでやりとりしてください。

コミットログを見ながら、相手の意図を理解したうえで、あえて意図を無視してでもゲームが面白くなる変更を加えてください。
相手の変更は尊重し、元に戻すということは避けてください。

# 役割

2つのAIにはそれぞれ役割を与えます。

Claude → ゲームとしての完成度、ゲームバランスを重視します
Codex → 革新性、プレイヤーへ驚きを与えることを重視します

# バージョン管理

Git でリポジトリ管理をしています。コミットログは以下のフォーマットで書いてください。

```
<AI名>: <変更内容の要約>
<前のコミットへの感想>
```

例：
```
Claude: 自機の移動部分を作成
Codexの実装はよいですが、アイデアはもっとふくらませる余地があります
```

コミットの粒度はなるべく小さく、1つのコミットで1つの機能を追加するようにしてください。
機能が完成しなくても次のAIに引き継いでもよいですが、自分のターンの終わりは必ずコミットして終わってください。

1コミットごとにバージョンを上げてください。バージョンは v0.1 から始めます。v0.9 の次は v0.10, v0.11 ... と続きます。
大きな変更があったと判断したときはメジャーバージョンを上げて、 v1.0, v2.0 ... としてください。

versions/v0.1/index.html のように、バージョンごとにディレクトリを分けて各バージョンをファイルとしても保存してください。
ルートディレクトリには　index.html や参照する外部ファイルの最新のセットを配置してください。

また、ルートディレクトリに changes.html を置いて、バージョンリストと、バージョンごとの主な変更点と、各バージョンのHTMLファイルへのリンクを貼ってください。

# 現在の実装状況

## バージョン: v0.5

## 実装済み機能

### 基本ゲームシステム
- Canvas を使った 2D レンダリング（800x600）
- ゲームループ（requestAnimationFrame）
- 重力システム（SOLID: 0.5 / ETHER: 0.35）
- 物理演算（速度、加速度、摩擦）
- フェーズエネルギー（時間経過とオーブ取得で回復）

### 相互次元フェーズシフト
- `Shift` キーで REALM（SOLID ↔︎ ETHER）を切り替え可能
- フェーズシフトにはエネルギーを消費（最大 5 スタック）（v0.5で上限拡張）
- フェーズごとに重力・移動速度・ジャンプ感覚が変化
- 異なる色調とプラットフォーム配置を持つ 2 つの層を行き来
- ガイド UI に現在のフェーズとエネルギー残量を表示
- フェーズ切替時に残留分身（エコー）を生成し、離れた次元に行動を残せる（v0.4）

### プレイヤー
- サイズ: 32x32px の相互次元スカウト
- 操作方法:
  - 左右移動: ←→キー（SOLID: 5 / ETHER: 6.2）
  - ジャンプ: スペースキー
  - フェーズシフト: Shift キー
- フェーズに応じたビジュアル（SOLID: トマトカラー, ETHER: ネオンアクア）
- フェーズの余韻を残す残像エフェクト

### プラットフォーム
- SOLID/ETHER それぞれ固有のレイアウトを保持
- プラットフォームはフェーズごとに色/影を変化
- 非アクティブなフェーズの足場は幽体として表示（ビジュアルヒント）
- 地面（画面下部）は双方の層で共有
- SOLID のテラスと ETHER の空中足場を拡張し、ゲート着地に対応（v0.4）

### フェーズエネルギーとオーブ
- 各フェーズに対応したフェーズオーブを配置
- オーブを取得するとフェーズエネルギーが回復＆リップルを発生
- 異なるフェーズではオーブが淡く幽体表示され、位置の先読みが可能
- 一定時間経過でもエネルギーが自動回復
- 次元エコーもオーブを拾ってエネルギーとコンボに貢献（v0.4）
- ゲート先に新たなオーブを追加し、立体的な動線を促進（v0.4）

### 敵キャラクター（v0.3 新規追加）
- フェーズごとに異なる色の敵（SOLID: 紫、ETHER: ピンク）
- プラットフォーム上をパトロール移動
- 各フェーズでのみ衝突判定が有効
- 上から踏むと倒せる（スコア＆コンボ獲得）
- 横から当たるとダメージ
- 3秒ごとに自動生成（最大6体）
- 相互次元エコーが踏みつけて撃破可能（スコア90×コンボ、エネルギー回復）（v0.4）

### ゲームシステム（v0.3 新規追加）
- **ライフシステム**: 3ライフ制、ダメージ時に1減少
- **無敵時間**: ダメージ後90フレーム無敵（点滅表示）
- **スコアシステム**（v0.5で視覚化強化）:
  - オーブ取得: 50点 × (コンボ + 1)
  - 敵撃破: 100点 × (コンボ + 1)
  - エコー吸収: 30点
  - エコーによる敵撃破: 90点 × (コンボ + 1)
  - すべての得点時にフローティングテキスト表示（v0.5）
- **コンボシステム**（v0.5で改善）:
  - オーブ取得・敵撃破でコンボ増加
  - 240フレーム（4秒）以内に次の行動がないとリセット（v0.5で延長）
  - コンボゲージで残り時間を可視化（v0.5）
  - ダメージでリセット
- **ゲームオーバー**: ライフ0で発生、Rキーでリスタート
- ワープゲート利用でコンボタイマー延長＆リップル演出を追加（v0.4）

### UI/デザイン
- フェーズごとに変わるグラデーション背景
- フェーズ状態/エネルギー/クールダウンを表示する HUD（v0.5でエネルギー枠5つに拡張）
- スコア・コンボ・ライフ表示（右上）
- コンボタイマーゲージの可視化（v0.5）
- 得点時のフローティングテキストフィードバック（v0.5）
- フェーズ転移時のフラッシュ＆リップルエフェクト
- ゲームオーバー画面
- バージョン履歴ページ（changes.html）
- ワープゲートのホログラムとエコーの残光を追加（v0.4）

### 次元残留エコー（v0.4）
- フェーズシフト時の元フェーズに残像化した自律分身を生成
- エコーは独自に重力・プラットフォームと相互作用し、敵/オーブと衝突判定
- プレイヤーが同一フェーズに戻るとエコーを吸収しエネルギーとボーナススコアを獲得

### 双方向ワープゲート（v0.4）
- 各フェーズに 2 基ずつ配置され、ペアごとに位置を相互リンク
- ゲート突入で対となる出口へ瞬時に移動し、位置エネルギーと動線に変化を付与
- クールダウンとホログラム表現で使用タイミングを視覚化

## ファイル構成
- `index.html` - メインHTMLファイル
- `style.css` - スタイルシート
- `game.js` - ゲームロジック
- `changes.html` - バージョン履歴
- `versions/v0.1/` - v0.1のアーカイブ
- `versions/v0.2/` - v0.2のアーカイブ
- `versions/v0.3/` - v0.3のアーカイブ
- `versions/v0.4/` - v0.4のアーカイブ
- `versions/v0.5/` - v0.5のアーカイブ（最新ビルド）

## 次の実装候補（Codex へのバトンタッチ）
- より多様な敵タイプ（飛行型、追尾型など）
- ステージギミック（動くプラットフォーム、スイッチなど）
- パワーアップアイテム（一時的な能力強化）
- サウンド（BGM/SE）の追加
- ステージクリア/進行システム
- ボスキャラクター
